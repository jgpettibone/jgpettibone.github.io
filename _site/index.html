<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Jeanette Pettibone &#8211; Hacking Away</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="JavaScript, Software Engineering, Full Stack, blog">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/corememory3.jpg">

<meta name="twitter:title" content="Jeanette Pettibone">
<meta name="twitter:description" content="Describe this nonsense.">
<meta name="twitter:creator" content="@jgpettibone">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Jeanette Pettibone">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="/index.html">
<meta property="og:site_name" content="Hacking Away">





<link rel="canonical" href="/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Hacking Away Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">




<style type="text/css">body {background-image:url(/images/witewall_3.png);}</style>


</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/mylinkedinphoto.jpg" alt="Jeanette Pettibone photo" class="author-photo">
					<h4>Jeanette Pettibone</h4>
					<p>Full Stack Software Engineer. Linguist. Computer and Natural Language Processor.</p>
				</li>
				<li><a href="/about/">Learn More</a></li>
				
				
				
				<li>
					<a href="http://github.com/jgpettibone"><i class="icon-github"></i> GitHub</a>
				</li>
				<li>
					<a href="http://linkedin.com/in/jeanettepettibone"><i class="icon-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://twitter.com/jgpettibone"><i class="icon-twitter"></i> Twitter</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="/images/corememory3.jpg" alt="Jeanette Pettibone">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Hacking Away</h1>
      <h2>Jeanette Pettibone</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2014-05-13T00:00:00-07:00"><a href="/make-a-thing/">May 13, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Jeanette Pettibone">Jeanette Pettibone</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/make-a-thing/" rel="bookmark" title="Freaq Out!" itemprop="url">Freaq Out!</a></h1>
    
  </header>
  <div class="entry-content">
    <!-- <h2 id="the-freaq-bookmarklet">The <code>freaq</code> bookmarklet</h2>
<p>One of my students, Zach Pomerantz, created a bookmarklet called <a href="http://www.freaq.io/">freaq</a> that is an audio visualizer for YouTube.  Very cool.  He also gave <a href="https://draftin.com/documents/329520?mode=presentation&amp;token=YfQRjZOYZz3vSaElvGAzm3oCZnD6MxOdcd143D5rH0ARfB4h25xcygLeIbfBkCilI2BBMXrjIP3gfyShnCgS518#0">a great presentation</a> about his process for making this bookmarklet and for using npm.</p>

 -->
    <h2 id="the-freaq-bookmarklet">The <code>freaq</code> bookmarklet</h2>
<p>One of my students, Zach Pomerantz, created a bookmarklet called <a href="http://www.freaq.io/">freaq</a> that is an audio visualizer for YouTube.  Very cool.  He also gave <a href="https://draftin.com/documents/329520?mode=presentation&amp;token=YfQRjZOYZz3vSaElvGAzm3oCZnD6MxOdcd143D5rH0ARfB4h25xcygLeIbfBkCilI2BBMXrjIP3gfyShnCgS518#0">a great presentation</a> about his process for making this bookmarklet and for using npm.</p>


    <div "read-more"><a href="/make-a-thing/">Read More</a></div>
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2014-05-08T00:00:00-07:00"><a href="/bitwise-n-queens/">May 08, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Jeanette Pettibone">Jeanette Pettibone</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/bitwise-n-queens/" rel="bookmark" title="Bitwise N-Queens" itemprop="url">Bitwise N-Queens</a></h1>
    
  </header>
  <div class="entry-content">
    <!-- <h2 id="the-n-queens-problem">The N-Queens Problem</h2>
<p><a href="http://en.wikipedia.org/wiki/Eight_queens_puzzle">Eight Queens</a> is a well-known algorithmic problem.  How many ways can you place eight queens on an 8x8 chessboard so that none of the queens threaten each other.  Following the rules of chess, one queen threatens another when it is in the same row, column, or diagonal.  N-Queens in the more general problem of solving this for any <em>n</em> queens on an <em>n</em> x <em>n</em> chessboard.</p>

<h2 id="the-non-bitwise-solution">The Non-Bitwise Solution</h2>
<p>I first solved this problem using an instance of an abstract Board class on which I recorded the positions of the queens as I placed them.  The Board is basically a matrix populated with 0s and 1s where 1s represent the placed queens and 0s represent the empty spaces.  The Board class also contained methods called <code>togglePiece()</code> that turns a 0 to a 1 and vice versa and <code>hasAnyQueenConflicts()</code> which checks for threats.  Below is simple code for <code>countNQueensSolutions</code> which will return the number of possible solutions for any <em>n</em> (within the processing limitations). </p>

<div class="highlight"><pre><code class="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">countNQueensSolutions</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">solutionCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
  <span class="kd">var</span> <span class="nx">board</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Board</span><span class="p">({</span><span class="nx">n</span><span class="o">:</span><span class="nx">n</span><span class="p">});</span>

  <span class="kd">var</span> <span class="nx">countQueenSolutions</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">queenBoard</span><span class="p">,</span> <span class="nx">rowIndex</span><span class="p">,</span> <span class="nx">numCols</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">rowIndex</span> <span class="o">===</span> <span class="nx">numCols</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">solutionCount</span><span class="o">++</span><span class="p">;</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">numCols</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
      <span class="nx">board</span><span class="p">.</span><span class="nx">togglePiece</span><span class="p">(</span><span class="nx">rowIndex</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">queenBoard</span><span class="p">.</span><span class="nx">hasAnyQueensConflicts</span><span class="p">()){</span>
        <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">countQueenSolutions</span><span class="p">(</span><span class="nx">queenBoard</span><span class="p">,</span> <span class="nx">rowIndex</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">numCols</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">solution</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span> <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">board</span><span class="p">.</span><span class="nx">togglePiece</span><span class="p">(</span><span class="nx">rowIndex</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">countQueenSolutions</span><span class="p">(</span><span class="nx">board</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Number of solutions for &#39;</span> <span class="o">+</span> <span class="nx">n</span> <span class="o">+</span> <span class="s1">&#39; queens:&#39;</span><span class="p">,</span> <span class="nx">solutionCount</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">solutionCount</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>

<h2 id="the-bitwise-solution">The Bitwise Solution</h2>
<p>My goal was to implement a solution using bitshifting.  While a bitshifting implementation would definitely increase the performance of the code above, I wanted to do this merely to better understand how I could use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators">bitwise operators</a> in an algorithm like this one.  Also, it was good preparation before attending a panel this week with three engineers out of <a href="http://www.hackreactor.com/">Hack Reactor</a> talking about their attempt to use a supercomputer to solve N-Queens where N=27.  There was a <a href="http://www.wired.com/2013/06/43651/">Wired article</a> about this.</p>

<h3 id="no-board-no-togglepiece">No Board, no <code>togglePiece()</code></h3>
<p>In the bitwise implementation, we won’t be using the Board class.  Instead of using the Board matrix, we’ll use binary numbers to represent the queen’s position in a row.  For instance, in a 4x4 chessboard, the queen’s position will be a binary number with the queen represented by 1 and the empty places represented by 0s:</p>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">queen’s position (base 2) —</th>
      <th style="text-align: center">—  (base 10)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">0001</td>
      <td style="text-align: center">1</td>
    </tr>
    <tr>
      <td style="text-align: left">0010</td>
      <td style="text-align: center">2</td>
    </tr>
    <tr>
      <td style="text-align: left">0100</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: left">1000</td>
      <td style="text-align: center">8</td>
    </tr>
  </tbody>
</table>

<p>Instead of using Board’s <code>togglePiece()</code> to place queens on the board, we’ll iterate through each possible spot in the row by incrementing the binary number either by multiples of 2 (in base 10) or by shifting the bit to left using the bitwise left shift («) operator.  </p>

<h3 id="no-board-no-hasanyqueensconflicts">No Board, no <code>hasAnyQueensConflicts()</code></h3>
<p>We need a new way - a bitshifting way - of finding the threats to a queen in a particular position.  Since we’re working with one position per row, we don’t need to account for row conflicts, but we still need to worry about column conflicts, minor diagonal (left) conflicts, and major diagonal (right) conflicts.  </p>

<p>Imagine that the queen is in the third position in the row.  The binary representations of the conflicts are shown in the table below - 1s are in positions for the conflicts.</p>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">binary representation</th>
      <th style="text-align: center">—  conflict  —</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">0010</td>
      <td style="text-align: center">queen’s position in the current row</td>
    </tr>
    <tr>
      <td style="text-align: left">0100</td>
      <td style="text-align: center">minor diagonal conflict in the next row</td>
    </tr>
    <tr>
      <td style="text-align: left">0001</td>
      <td style="text-align: center">major diagonal conflict in the next row</td>
    </tr>
    <tr>
      <td style="text-align: left">0010</td>
      <td style="text-align: center">column conflict in the next row</td>
    </tr>
  </tbody>
</table>

<p>In order to check for all the conflicts, we need to bitwise OR these 3 conflicts to find all the positions that would cause a conflict in the next row.  So</p>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">binary representation</th>
      <th style="text-align: center">—  conflict  —</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">0100</td>
      <td style="text-align: center">minor diagonal conflict</td>
    </tr>
    <tr>
      <td style="text-align: left">0001</td>
      <td style="text-align: center">major diagonal conflict</td>
    </tr>
    <tr>
      <td style="text-align: left">0010</td>
      <td style="text-align: center">column conflict</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">0111</td>
      <td style="text-align: center">minor diagonal conflict | major diagonal conflict | column conflict</td>
    </tr>
  </tbody>
</table>

<p>Now we can see that despite all these conflicts, there still is a position where a queen could fit in the next row without causing additional conflicts (represented by 1000).  </p>

<p>We can find that perfect position by iterating through all possible positions of the queen and performing bitwise AND with this position and the conflicts.  When the result of this operation is 0, we know that there is a place for the queen.</p>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">binary representation</th>
      <th style="text-align: center">—  conflict  —</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">0111</td>
      <td style="text-align: center">minor diagonal conflict | major diagonal conflict | column conflict</td>
    </tr>
    <tr>
      <td style="text-align: left">1000</td>
      <td style="text-align: center">queen’s position in next row</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">0000</td>
      <td style="text-align: center">conflicts &amp; queen</td>
    </tr>
  </tbody>
</table>

<p>Compare the above table with the one below where there would be a conflict with queen’s position.</p>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">binary representation</th>
      <th style="text-align: center">—  conflict  —</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">0111</td>
      <td style="text-align: center">minor diagonal conflict | major diagonal conflict | column conflict</td>
    </tr>
    <tr>
      <td style="text-align: left">0100</td>
      <td style="text-align: center">queen’s position in next row</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">0100</td>
      <td style="text-align: center">conflicts &amp; queen</td>
    </tr>
  </tbody>
</table>

<p>It’s only when the result of the bitwise AND equals 0 that we know the queen will be able to be in that position without conflict.</p>

<h3 id="finding-the-next-rows-conflicts">Finding the next row’s conflicts</h3>
<p>In the example above, we had the following conflicts and position of the queen</p>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">binary representation</th>
      <th style="text-align: center">—  conflict  —</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1000</td>
      <td style="text-align: center">queen’s position in next row</td>
    </tr>
    <tr>
      <td style="text-align: left">0100</td>
      <td style="text-align: center">minor diagonal conflict</td>
    </tr>
    <tr>
      <td style="text-align: left">0001</td>
      <td style="text-align: center">major diagonal conflict</td>
    </tr>
    <tr>
      <td style="text-align: left">0010</td>
      <td style="text-align: center">column conflict</td>
    </tr>
  </tbody>
</table>

<p>We can build on this information in order to find the conflicts in the next row.  The next column conflict is found by bitwise ORing the current column conflict with the queen’s position.  Similarly, the next minor diagonal and major diagonal conflicts are found by bitwise ORing the current conflicts with the queen’s position and then bitshifting the diagonals in the proper direction (to the left for the minor diagonals and to the right for major diagonals.)  This gives us the following next conflicts.</p>

<h4 id="column-conflicts">Column Conflicts</h4>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">binary representation</th>
      <th style="text-align: center">—  conflict  —</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">0010</td>
      <td style="text-align: center">column conflict</td>
    </tr>
    <tr>
      <td style="text-align: left">1000</td>
      <td style="text-align: center">queen’s position in next row</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">1010</td>
      <td style="text-align: center">column conflict | queen’s position</td>
    </tr>
  </tbody>
</table>

<h4 id="minor-diagonal-conflicts">Minor Diagonal Conflicts</h4>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th>binary representation</th>
      <th style="text-align: center">—  conflict  —</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"> </td>
      <td>0100</td>
      <td style="text-align: center">minor diagonal conflict</td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td>1000</td>
      <td style="text-align: center">queen’s position in next row</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left"> </td>
      <td>1100</td>
      <td style="text-align: center">minor diagonal conflict | queen’s position</td>
    </tr>
    <tr>
      <td style="text-align: left">(1)</td>
      <td>1000</td>
      <td style="text-align: center">minor diagonal conflict | queen’s position « 1</td>
    </tr>
  </tbody>
</table>

<h4 id="major-diagonal-conflicts">Major Diagonal Conflicts</h4>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">binary representation</th>
      <th style="text-align: center">—  conflict  —</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">0001</td>
      <td style="text-align: center">major diagonal conflict</td>
    </tr>
    <tr>
      <td style="text-align: left">1000</td>
      <td style="text-align: center">queen’s position in next row</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">1001</td>
      <td style="text-align: center">major diagonal conflict | queen’s position</td>
    </tr>
    <tr>
      <td style="text-align: left">0100 (1)</td>
      <td style="text-align: center">major diagonal conflict | queen’s position » 1</td>
    </tr>
  </tbody>
</table>

<h3 id="putting-it-together">Putting it Together</h3>
<p>Now we can implement the bitwise queens logic into the original <code>countNQueensSolutions</code> that I wrote.</p>

<div class="highlight"><pre><code class="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">countNQueensSolutionsBitwise</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">solutionCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="c1">// uses minDiagConflict, majDiagConflict, colConflict for conflicts in the </span>
  <span class="c1">// minor diagonal, major diagonal, and column</span>
  <span class="c1">// only placing one queen per row so not testing row conflicts</span>
  <span class="kd">var</span> <span class="nx">countQueenSolutions</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">currentRow</span><span class="p">,</span> <span class="nx">minDiagConflict</span><span class="p">,</span> <span class="nx">majDiagConflict</span><span class="p">,</span> <span class="nx">colConflict</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// if we&#39;ve hit n (the index past the last row), then we&#39;ve found a solution</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">currentRow</span> <span class="o">===</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">solutionCount</span><span class="o">++</span><span class="p">;</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// we have a conflict if we have any type of conflict  </span>
    <span class="c1">// so we want to use bitwise OR  </span>
    <span class="kd">var</span> <span class="nx">conflicts</span> <span class="o">=</span> <span class="nx">minDiagConflict</span> <span class="o">|</span> <span class="nx">majDiagConflict</span> <span class="o">|</span> <span class="nx">colConflict</span><span class="p">;</span>

    <span class="c1">// iterates from 1 up through increments of 2 (binary numbers)</span>
    <span class="c1">// until it bitshifts over the size of the board </span>
    <span class="c1">// ex: if n = 4 , (1 &lt;&lt; 4) = 10000 = 16, so the last iteration will be </span>
    <span class="c1">// when queenPosition = 8 = 1000 [1 = 0001, 2 = 0010, 4 = 0100, 8 = 1000]</span>
    <span class="c1">// queenPosition represents the position of the queen in the row</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">queenPosition</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">queenPosition</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="nx">n</span><span class="p">;</span> <span class="nx">queenPosition</span><span class="o">*=</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// we want conflicts &amp; queenPosition to equal 0</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">conflicts</span> <span class="o">&amp;</span> <span class="nx">queenPosition</span><span class="p">))</span> <span class="p">{</span>

        <span class="c1">// put the next values of the conflicts into the recursive solution</span>
        <span class="c1">// (stored in variables here for readability in the blog post)</span>
        <span class="kd">var</span> <span class="nx">nextMinDiagConflict</span> <span class="o">=</span> <span class="p">(</span><span class="nx">minDiagConflict</span> <span class="o">|</span> <span class="nx">queenPosition</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">nextMajDiagConflict</span> <span class="o">=</span> <span class="p">(</span><span class="nx">majDiagConflict</span> <span class="o">|</span> <span class="nx">queenPosition</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">nextColConflict</span> <span class="o">=</span> <span class="nx">colConflict</span> <span class="o">|</span> <span class="nx">queenPosition</span><span class="p">;</span>
        <span class="nx">result</span> <span class="o">=</span> <span class="nx">countQueenSolutions</span><span class="p">(</span><span class="nx">currentRow</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">nextMinDiagConflict</span><span class="p">,</span> <span class="nx">nextMajDiagConflict</span><span class="p">,</span> <span class="nx">nextColConflict</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="k">return</span> <span class="nx">solutionCount</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">countQueenSolutions</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">solutionCount</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>

 -->
    <h2 id="the-n-queens-problem">The N-Queens Problem</h2>
<p><a href="http://en.wikipedia.org/wiki/Eight_queens_puzzle">Eight Queens</a> is a well-known algorithmic problem.  How many ways can you place eight queens on an 8x8 chessboard so that none of the queens threaten each other.  Following the rules of chess, one queen threatens another when it is in the same row, column, or diagonal.  N-Queens in the more general problem of solving this for any <em>n</em> queens on an <em>n</em> x <em>n</em> chessboard.</p>


    <div "read-more"><a href="/bitwise-n-queens/">Read More</a></div>
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2014-05-06T00:00:00-07:00"><a href="/flooring-a-number/">May 06, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Jeanette Pettibone">Jeanette Pettibone</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/flooring-a-number/" rel="bookmark" title="Flooring a Number" itemprop="url">Flooring a Number</a></h1>
    
  </header>
  <div class="entry-content">
    <!-- <h2 id="flooring-a-number-with-bitwise-or">Flooring a Number with Bitwise OR</h2>
<p>Somewhere along the way, I stopped using JavaScript’s Math.floor() function and I started using bitwise OR 0 such as in the following example:</p>

<div class="highlight"><pre><code class="javascript"><span class="mf">2.145</span> <span class="o">|</span> <span class="mi">0</span>  <span class="c1">// 2</span>
</code></pre></div>

<p>In fact, there are other ways of flooring a number by using bitwise operators.  Some of the best known are:</p>

<ul>
  <li>left shift («)</li>
</ul>

<div class="highlight"><pre><code class="javascript"><span class="mf">2.145</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span>  <span class="c1">// 2</span>
</code></pre></div>

<ul>
  <li>double NOT (~~)</li>
</ul>

<div class="highlight"><pre><code class="javascript"><span class="o">~~</span><span class="mf">2.145</span>  <span class="c1">// 2</span>
</code></pre></div>

<p>There are many posts out there about the relative speed of these different methods, most of which insist that Math.floor() is slower than bitwise operators.  There are a few JS Perfs out there on just this topic - <a href="http://jsperf.com/jsfvsbitnot/8">bitwise NOT vs Math.floor()</a> and <a href="http://jsperf.com/or-vs-floor/2">or-vs-floor</a> are two of these.</p>

<p>But I continued to use bitwise OR 0 without really researching exactly how it worked and whether it was really better than Math.floor().  Until today.</p>

<h2 id="what-happened">What Happened?</h2>
<p>I wrote a simple function that extended the Number prototype with a new method called <code>toEnglish</code> that returns the number as a string using English words.  For example:</p>

<div class="highlight"><pre><code class="bash">&gt; <span class="o">(</span>123456789<span class="o">)</span>.toEnglish<span class="o">()</span>
  <span class="s2">&quot;one hundred twenty-three million four hundred fifty-six thousand seven hundred eighty-nine&quot;</span>
&gt; <span class="o">(</span>1000000000000<span class="o">)</span>.toEnglish<span class="o">()</span>
  <span class="s2">&quot;one trillion&quot;</span>
</code></pre></div>

<p>But something happened when I tried to call this method on numbers greater than one trillion!  For the number 10,000,000,000,000, instead of getting the result “ten trillion” I got something very strange.</p>

<div class="highlight"><pre><code class="bash">&gt; <span class="o">(</span>10000000000000<span class="o">)</span>.toEnglish<span class="o">()</span>
  <span class="s2">&quot;one trillion four hundred ten billion sixty-five million four hundred eight thousand&quot;</span>
</code></pre></div>

<p>What?</p>

<h2 id="the-limitation-of-bitwise-operators">The Limitation of Bitwise Operators</h2>
<p>I had run into the limitation of using bitwise OR.  Bitwise operators treat their operands as a sequence of 32 binary bits (zeros and ones) and will actually truncate larger numbers down to 32 bits.  So you really should only use bitwise operators when you know you’ll be working with 32 bit numbers.  The JavaScript Number Type, however, represents the double-precision 64-bit format IEEE 754 values (for more information, see the <a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf">ECMAScript Language Specification</a>).  </p>

<p>In the example above, my <code>toEnglish</code> function had a line of code using the bitwise OR 0 - <code>num = num / 1000 | 0</code> - which was dividing the num 10000000000000 by 1000 and setting num to 10000000000, which is 34 bits, before using the bitwise OR.  </p>

<div class="highlight"><pre><code class="bash">&gt; <span class="o">(</span>10000000000<span class="o">)</span>.toString<span class="o">(</span>2<span class="o">)</span>
  <span class="s2">&quot;1001010100000010111110010000000000&quot;</span>
</code></pre></div>

<p>Note that to quickly see the binary (base 2) number from any decimal (base 10) number, you can call the <code>toString()</code> function with a specified base as the argument.  In the example, I called <code>toString(2)</code> to see the base 2 (binary) number.</p>

<h2 id="but-how-do-bitwise-operators-work">But How Do Bitwise Operators Work?</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators">Bitwise operators</a> work as follows (from MDN):</p>

<ul>
  <li>The operands are converted into 32 bit integers and expressed as zeros and ones</li>
  <li>Each bit in the first operand is paired with the corresponding bit in the second operand: first bit to first bit, second bit to second bit, etc.</li>
  <li>The operator is applied to each pair of bits, and the result is constructed bitwise.</li>
</ul>

<p>Below are some bitwise operators.</p>

<h3 id="bitwise-and-">Bitwise AND (&amp;)</h3>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">BASE 10</th>
      <th style="text-align: center">BASE 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">9</td>
      <td style="text-align: center">00000000000000000000000000001001</td>
    </tr>
    <tr>
      <td style="text-align: left">14</td>
      <td style="text-align: center">00000000000000000000000000001110</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">14&amp;9</td>
      <td style="text-align: center">00000000000000000000000000001000</td>
    </tr>
  </tbody>
</table>

<h3 id="bitwise-or-">Bitwise OR (|)</h3>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">BASE 10</th>
      <th style="text-align: center">BASE 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">9</td>
      <td style="text-align: center">00000000000000000000000000001001</td>
    </tr>
    <tr>
      <td style="text-align: left">14</td>
      <td style="text-align: center">00000000000000000000000000001110</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">14|9</td>
      <td style="text-align: center">00000000000000000000000000001111</td>
    </tr>
  </tbody>
</table>

<h3 id="bitwise-xor-">Bitwise XOR (^)</h3>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">BASE 10</th>
      <th style="text-align: center">BASE 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">9</td>
      <td style="text-align: center">00000000000000000000000000001001</td>
    </tr>
    <tr>
      <td style="text-align: left">14</td>
      <td style="text-align: center">00000000000000000000000000001110</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">14^9</td>
      <td style="text-align: center">00000000000000000000000000000111</td>
    </tr>
  </tbody>
</table>

<h3 id="bitwise-not-">Bitwise NOT (~)</h3>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">BASE 10</th>
      <th style="text-align: center">BASE 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">9</td>
      <td style="text-align: center">00000000000000000000000000001001</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">~9</td>
      <td style="text-align: center">11111111111111111111111111110110</td>
    </tr>
  </tbody>
</table>

<h3 id="bitwise-left-shift-">Bitwise Left Shift («)</h3>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">BASE 10</th>
      <th style="text-align: center">BASE 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">9</td>
      <td style="text-align: center">00000000000000000000000000001001</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">9«2</td>
      <td style="text-align: center">00000000000000000000000000100100</td>
    </tr>
  </tbody>
</table>

<h3 id="bitwise-sign-propogating-right-shift-">Bitwise (Sign-Propogating) Right Shift (»)</h3>

<table rules="groups">
  <thead>
    <tr>
      <th style="text-align: left">BASE 10</th>
      <th style="text-align: center">BASE 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">9</td>
      <td style="text-align: center">00000000000000000000000000001001</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">9»2</td>
      <td style="text-align: center">00000000000000000000000000000010</td>
    </tr>
  </tbody>
</table>

<h2 id="how-do-bitwise-operators-floor-numbers">How Do Bitwise Operators Floor Numbers?</h2>
<p>Bitwise operators floor numbers simply because they convert their operands into 32 bit integers.  This conversion to integer, however, is done by truncation and not by rounding the number.  This means that for negative numbers, the results of using Math.floor() won’t be the same as the results of using a bitwise operator.  Take a look at the following:</p>

<div class="highlight"><pre><code class="bash">&gt; Math.floor<span class="o">(</span>2.134<span class="o">)</span>
  2
&gt; 2.134 <span class="p">|</span> 0
  2
&gt; Math.floor<span class="o">(</span>-2.134<span class="o">)</span>
  -3
&gt; -2.134 <span class="p">|</span> 0
  -2
</code></pre></div>

<p>There’s also a difference with NaN:</p>

<div class="highlight"><pre><code class="bash">&gt; Math.floor<span class="o">(</span>NaN<span class="o">)</span>
  NaN
&gt; NaN <span class="p">|</span> 0
  0
</code></pre></div>

<h2 id="bottom-line">Bottom Line</h2>
<p>Using these bitwise operators isn’t the equivalent to using Math.floor(), though for positive numbers that have fewer than 32 bits the results will be the same.  To be on the safe side, however, it’s a good idea to know what your data is and to be consistent.</p>
 -->
    <h2 id="flooring-a-number-with-bitwise-or">Flooring a Number with Bitwise OR</h2>
<p>Somewhere along the way, I stopped using JavaScript’s Math.floor() function and I started using bitwise OR 0 such as in the following example:</p>


    <div "read-more"><a href="/flooring-a-number/">Read More</a></div>
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2014-04-26T00:00:00-07:00"><a href="/prime-sieves/">April 26, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Jeanette Pettibone">Jeanette Pettibone</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/prime-sieves/" rel="bookmark" title="Prime Sieves" itemprop="url">Prime Sieves</a></h1>
    
  </header>
  <div class="entry-content">
    <!-- <h2 id="testing-for-prime-numbers">Testing for Prime Numbers</h2>
<p>It seems like a common toy problem is writing a function that tests whether or not a number is prime (only divisable by itself and 1).  This toy problem, however, soon started a discussion on how much could be gained by using a prime sieve (such as the <a href="http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a> or the <a href="http://en.wikipedia.org/wiki/Sieve_of_Sundaram">Sieve of Sundaram</a>) for finding all primes in a range instead of simply looping through and testing each number.  Three of us quickly wrote up a few different versions and tested them in JS Perf.  You can find the results <a href="http://jsperf.com/primefinder/5">here</a>.</p>

<p>It is difficult to do a direct comparison, however, because of the different coding styles and algorithm design choices.  There was no coordination to make these uniform as all the testing was done after the fact.  If I have time to create more uniform code, I will update this post.</p>
 -->
    <h2 id="testing-for-prime-numbers">Testing for Prime Numbers</h2>
<p>It seems like a common toy problem is writing a function that tests whether or not a number is prime (only divisable by itself and 1).  This toy problem, however, soon started a discussion on how much could be gained by using a prime sieve (such as the <a href="http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a> or the <a href="http://en.wikipedia.org/wiki/Sieve_of_Sundaram">Sieve of Sundaram</a>) for finding all primes in a range instead of simply looping through and testing each number.  Three of us quickly wrote up a few different versions and tested them in JS Perf.  You can find the results <a href="http://jsperf.com/primefinder/5">here</a>.</p>


    <div "read-more"><a href="/prime-sieves/">Read More</a></div>
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2014-04-20T00:00:00-07:00"><a href="/galaxy-zoo-winner/">April 20, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Jeanette Pettibone">Jeanette Pettibone</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/galaxy-zoo-winner/" rel="bookmark" title="Galaxy Zoo Winner" itemprop="url">Galaxy Zoo Winner</a></h1>
    
  </header>
  <div class="entry-content">
    <!-- <h2 id="the-galaxy-zoo-kaggle-competition">The Galaxy Zoo Kaggle Competition</h2>
<p>Back in February, a few colleagues and I decided to go for our first <a href="http://www.kaggle.com/">Kaggle</a> competition!  We entered the <a href="http://www.kaggle.com/c/galaxy-zoo-the-galaxy-challenge">Galaxy Zoo</a> challenge to classify galaxy morphologies.  For some of us, this was the first time doing machine learning.  And many of us hadn’t done any image processing or feature extraction before. </p>

<p>One of my colleagues, Kwyn Meagher, documented our process through two blog posts - <a href="http://harleykwyn.com/machine-learning-work-flow/">Machine Learning Work Flow for Hackers</a> and <a href="http://harleykwyn.com/so-you-want-to-be-a-kaggle-wizard/">So You Want to Be a Kaggle Wizard</a>.  I took the reins with implementing a random forest algorithm, choosing parameters, and testing features.  We ended up in 120th place out of 329 teams.  Not bad for our first Kaggle competition.</p>

<h2 id="the-winning-solution">The Winning Solution</h2>
<p>I’m very happy that the winner, Sander Dieleman, has decided to post <a href="http://benanne.github.io/2014/04/16/galaxy-zoo-code.html">his code</a> as well as a <a href="http://benanne.github.io/2014/04/05/galaxy-zoo.html">detailed explanation of how he approached the problem</a>.  This kind of generosity within the machine learning and Kaggle community is priceless.  </p>

<p>It’s interesting to see that the top two people on the leaderboard both used convolutional neural networks in their solutions.  Having just finished implementing my first neural network learning algorithm today, this is more than inspiring.  I’m really looking forward to diving into his explanation in some detail. </p>
 -->
    <h2 id="the-galaxy-zoo-kaggle-competition">The Galaxy Zoo Kaggle Competition</h2>
<p>Back in February, a few colleagues and I decided to go for our first <a href="http://www.kaggle.com/">Kaggle</a> competition!  We entered the <a href="http://www.kaggle.com/c/galaxy-zoo-the-galaxy-challenge">Galaxy Zoo</a> challenge to classify galaxy morphologies.  For some of us, this was the first time doing machine learning.  And many of us hadn’t done any image processing or feature extraction before. </p>


    <div "read-more"><a href="/galaxy-zoo-winner/">Read More</a></div>
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    Previous
  
  <ul class="inline-list">
    <li>
      
        <span class="current-page">1</span>
      
    </li>
    
      <li>
        
          <a href="/page2">2</a>
        
      </li>
    
      <li>
        
          <a href="/page3">3</a>
        
      </li>
    
  </ul>
  
    <a href="/page2" class="btn">Next</a>
  
</div><!-- /.pagination -->

</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2020 Jeanette Pettibone. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span><br><span>         <a href="http://github.com/jgpettibone"><i class="icon-github"></i>  </a>  <a href="http://linkedin.com/in/jeanettepettibone"><i class="icon-linkedin"></i>  </a> <a href="http://twitter.com/jgpettibone"><i class="icon-twitter"></i>  </span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>

          

</body>
</html>
